from day7_part1 import get_S_index, beam_split

initial_input = [
    [".", ".", ".", ".", ".", ".", ".", "S", ".", ".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", ".", ".", "^", ".", ".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", ".", "^", ".", "^", ".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", "^", ".", "^", ".", "^", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", "^", ".", "^", ".", ".", ".", "^", ".", ".", ".", "."],
    [".", ".", ".", "^", ".", "^", ".", ".", ".", "^", ".", "^", ".", ".", "."],
    [".", ".", "^", ".", ".", ".", "^", ".", ".", ".", ".", ".", "^", ".", "."],
    [".", "^", ".", "^", ".", "^", ".", "^", ".", "^", ".", ".", ".", "^", "."],
]


def test_get_S_index():
    input = [
        [".", ".", ".", ".", ".", ".", ".", "S", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", "^", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", "^", ".", "^", ".", ".", ".", ".", ".", "."],
    ]
    answer = get_S_index(input)
    assert answer == 7


def test_beam_split_first_time():
    input = [
        [".", ".", ".", ".", ".", ".", ".", "S", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", "^", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", "^", ".", "^", ".", ".", ".", ".", ".", "."],
    ]
    beam_positions = {7}
    split_number = 0
    beam_positions, split_number = beam_split(input[1], beam_positions, split_number)
    assert beam_positions == {6, 8}
    assert split_number == 1


def test_beam_split_two_rows():
    input = [
        [".", ".", ".", ".", ".", ".", ".", "S", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", ".", "^", ".", ".", ".", ".", ".", ".", "."],
        [".", ".", ".", ".", ".", ".", "^", ".", "^", ".", ".", ".", ".", ".", "."],
    ]
    beam_positions = {6, 8}
    split_number = 1
    beam_positions, split_number = beam_split(input[2], beam_positions, split_number)
    assert beam_positions == {5, 7, 9}
    assert split_number == 3
